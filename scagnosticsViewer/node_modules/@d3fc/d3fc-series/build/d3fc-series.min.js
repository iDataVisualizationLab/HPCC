(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@d3fc/d3fc-data-join"),require("d3-shape"),require("d3-selection"),require("@d3fc/d3fc-rebind"),require("d3-scale"),require("@d3fc/d3fc-webgl"),require("@d3fc/d3fc-shape"),require("d3-array"),require("d3-scale-chromatic")):"function"==typeof define&&define.amd?define(["exports","@d3fc/d3fc-data-join","d3-shape","d3-selection","@d3fc/d3fc-rebind","d3-scale","@d3fc/d3fc-webgl","@d3fc/d3fc-shape","d3-array","d3-scale-chromatic"],t):(e=e||self,t(e.fc=e.fc||{},e.fc,e.d3,e.d3,e.fc,e.d3,e.fc,e.fc,e.d3,e.d3))})(this,function(e,t,a,l,i,r,n,d,c,s){'use strict';function o(){var e=arguments;return function(t,a){for(var l=0,i=e.length;l<i;l++)if(null==e[l](t,a))return!1;return!0}}function h(e){return g(e)||u(e)||b()}function g(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var p=function(e){return"function"==typeof e?e:function(){return e}},w=function(e,t){return"left"===e?t/2:"right"===e?-t/2:0},f=function(e){var t=Object.assign({},e),a=function(){};return Object.keys(t).forEach(function(e){a[e]=function(){return arguments.length?(t[e]=0>=arguments.length?void 0:arguments[0],a):t[e]}}),a},y=function(){var e=function(){return 0},t=function(e){return e.x},a=function(e){return e.y},l="center",n=function(){return 5},c="vertical",s=f({decorate:function(){},defined:function(l,r){return o(e,t,a)(l,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return s.values=function(r,d){var i=n(r,d),o=w(l,i),h=s.xScale(),g=s.yScale();if("vertical"===c){var u=g(a(r,d),d),b=g(e(r,d),d),p=h(t(r,d),d)+o;return{d:r,x:p,y:u,y0:b,width:i,height:u-b,origin:[p,u],baseOrigin:[p,b],transposedX:p,transposedY:u}}var f=h(a(r,d),d),y=h(e(r,d),d),S=g(t(r,d),d)+o;return{d:r,x:S,y:f,y0:y,width:i,height:f-y,origin:[f,S],baseOrigin:[y,S],transposedX:f,transposedY:S}},s.xValues=function(){return"vertical"===c?[t]:[e,a]},s.yValues=function(){return"vertical"===c?[e,a]:[t]},s.baseValue=function(){return arguments.length?(e=p(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(t=p(0>=arguments.length?void 0:arguments[0]),s):t},s.mainValue=function(){return arguments.length?(a=p(0>=arguments.length?void 0:arguments[0]),s):a},s.bandwidth=function(){return arguments.length?(n=p(0>=arguments.length?void 0:arguments[0]),s):n},s.align=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.orient=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],s):c},s},S={red:"#c60",green:"#6c0",black:"#000",gray:"#ddd",darkGray:"#999"},x=function(){var e=y(),r=a.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),n=t.dataJoin("path","line"),d=function(t){t.selection&&n.transition(t),r.defined(e.defined()),t.each(function(t,a,i){var d=n(l.select(i[a]),[t]);d.enter().attr("fill","none").attr("stroke",S.black),d.attr("d",r),e.decorate()(d,t,a)})};return i.rebindAll(d,e,i.exclude("baseValue","bandwidth","align")),i.rebind(d,n,"key"),i.rebind(d,r,"curve"),d},v=function(){var e=y(),t=a.line().x(function(t,a){return e.values(t,a).transposedX}).y(function(t,a){return e.values(t,a).transposedY}),l=function(a){var l=t.context();l.beginPath(),l.strokeStyle=S.black,l.fillStyle="transparent",e.decorate()(l,a),t.defined(e.defined())(a),l.fill(),l.stroke(),l.closePath()};return i.rebindAll(l,e,i.exclude("baseValue","bandwidth","align")),i.rebind(l,t,"curve","context"),l},A=function(){var e=y(),t=n.webglAdjacentAttribute(-1,2),a=t.offset(-1),l=t.offset(1),r=t.offset(2),d=n.webglAdjacentAttribute(-1,2),c=d.offset(-1),s=d.offset(1),o=d.offset(2),h=n.webglAdjacentAttribute(0,1).type(n.webglTypes.UNSIGNED_BYTE),g=h.offset(1),u=n.webglSeriesLine().crossPreviousValueAttribute(a).crossValueAttribute(t).crossNextValueAttribute(l).crossNextNextValueAttribute(r).mainPreviousValueAttribute(c).mainValueAttribute(d).mainNextValueAttribute(s).mainNextNextValueAttribute(o).definedAttribute(h).definedNextAttribute(g),b=function(){return!1},p=n.webglScaleMapper,w=[],f=null,S=null,x=function(a){var l=p(e.xScale()),r=p(e.yScale()),n=!b(w,a);n&&(w=a,h.value(function(t,a){return e.defined()(t,a)}).data(a)),(n||l.scale!==f)&&(f=l.scale,"vertical"===e.orient()?t.value(function(t,a){return l.scale(e.crossValue()(t,a))}).data(a):t.value(function(t,a){return l.scale(e.mainValue()(t,a))}).data(a)),(n||r.scale!==S)&&(S=r.scale,"vertical"===e.orient()?d.value(function(t,a){return r.scale(e.mainValue()(t,a))}).data(a):d.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),u.xScale(l.webglScale).yScale(r.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),u(a.length)};return x.equals=function(){return arguments.length?(b=0>=arguments.length?void 0:arguments[0],x):b},x.scaleMapper=function(){return arguments.length?(p=0>=arguments.length?void 0:arguments[0],x):p},i.rebindAll(x,e,i.exclude("baseValue","bandwidth","align")),i.rebind(x,u,"context","lineWidth"),x},V=function(){var e=function(e){return e.high},t=function(e){return e.low},a=function(e){return e.cross},l="vertical",n="center",c=function(){return 5},s=f({decorate:function(){},defined:function(l,r){return o(t,e,a)(l,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return s.values=function(r,d){var i=c(r,d),o=w(n,i),h=s.xScale(),g=s.yScale();if("vertical"===l){var u=g(e(r,d));return{origin:[h(a(r,d))+o,u],high:0,low:g(t(r,d))-u,width:i}}var b=h(t(r,d));return{origin:[b,g(a(r,d))+o],high:h(e(r,d))-b,low:0,width:i}},s.xValues=function(){return"vertical"===l?[a]:[e,t]},s.yValues=function(){return"vertical"===l?[e,t]:[a]},s.orient=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],s):l},s.lowValue=function(){return arguments.length?(t=p(0>=arguments.length?void 0:arguments[0]),s):t},s.highValue=function(){return arguments.length?(e=p(0>=arguments.length?void 0:arguments[0]),s):e},s.crossValue=function(){return arguments.length?(a=p(0>=arguments.length?void 0:arguments[0]),s):a},s.bandwidth=function(){return arguments.length?(c=p(0>=arguments.length?void 0:arguments[0]),s):c},s.align=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],s):n},s},m=function(){var e,t=function(e){return e.date},a=function(e){return e.open},l=function(e){return e.high},n=function(e){return e.low},c=function(e){return e.close},s=function(){return 5},h="center",g=function(a,l){return e.xScale()(t(a,l))};return e=f({decorate:function(){},defined:function(e,r){return o(t,a,n,l,c)(e,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()}),e.values=function(t,r){var i=c(t,r),d=a(t,r),o=s(t,r),u=w(h,o),b="";return i>d?b="up":i<d&&(b="down"),{cross:g(t,r)+u,open:e.yScale()(d),high:e.yScale()(l(t,r)),low:e.yScale()(n(t,r)),close:e.yScale()(i),width:o,direction:b}},e.xValues=function(){return[t]},e.yValues=function(){return[a,l,n,c]},e.crossValue=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],e):t},e.openValue=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],e):a},e.highValue=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],e):l},e.lowValue=function(){return arguments.length?(n=0>=arguments.length?void 0:arguments[0],e):n},e.yValue=e.closeValue=function(){return arguments.length?(c=0>=arguments.length?void 0:arguments[0],e):c},e.bandwidth=function(){return arguments.length?(s=p(0>=arguments.length?void 0:arguments[0]),e):s},e.align=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],e):h},e},k=function(e,a){var r=m(),n=t.dataJoin("g",a),c=function(e){return"translate("+e.cross+", "+e.high+")"},s=function(e){return function(t){return e.selection?t.transition(e):t}},o=function(t){t.selection&&n.transition(t);var o=s(t);t.each(function(t,i,d){var s=t.filter(r.defined()),h=n(l.select(d[i]),s);h.enter().attr("transform",function(e,t){return c(r.values(e,t))+" scale(1e-6, 1)"}).append("path"),h.each(function(t,n,i){var d=r.values(t,n),s="up"===d.direction?S.green:S.red,h=o(l.select(i[n])).attr("class",a+" "+d.direction).attr("stroke",s).attr("fill",s).attr("transform",function(){return c(d)+" scale(1)"});e.x(0).width(d.width).open(function(){return d.open-d.high}).high(0).low(function(){return d.low-d.high}).close(function(){return d.close-d.high}),h.select("path").attr("d",e([t]))}),r.decorate()(h,t,i)})};return i.rebind(o,n,"key"),i.rebindAll(o,r),o},N=function(e){var t=m(),a=function(a){var l=a.filter(t.defined()),r=e.context();l.forEach(function(a,l){r.save();var i=t.values(a,l);r.translate(i.cross,i.high),r.beginPath(),e.x(0).open(function(){return i.open-i.high}).width(i.width).high(0).low(function(){return i.low-i.high}).close(function(){return i.close-i.high})([a]);var n="up"===i.direction?S.green:S.red;r.strokeStyle=n,r.fillStyle=n,t.decorate()(r,a,l),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebind(a,e,"context"),i.rebindAll(a,t),a},E=function(e){var t=m(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute(),d=n.webglAttribute(),c=n.webglAttribute(),s=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),o=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE);e.crossValueAttribute(a).openValueAttribute(l).highValueAttribute(r).lowValueAttribute(d).closeValueAttribute(c).bandwidthAttribute(s).definedAttribute(o);var h=function(){return!1},g=n.webglScaleMapper,u=[],b=null,p=null,w=function(i){var n=g(t.xScale()),w=g(t.yScale()),f=!h(u,i);f&&(u=i,s.value(function(e,a){return t.bandwidth()(e,a)}).data(i),o.value(function(e,a){return t.defined()(e,a)}).data(i)),(f||n.scale!==b)&&(b=n.scale,a.value(function(e,a){return n.scale(t.crossValue()(e,a))}).data(i)),(f||w.scale!==p)&&(p=w.scale,l.value(function(e,a){return w.scale(t.openValue()(e,a))}).data(i),r.value(function(e,a){return w.scale(t.highValue()(e,a))}).data(i),d.value(function(e,a){return w.scale(t.lowValue()(e,a))}).data(i),c.value(function(e,a){return w.scale(t.closeValue()(e,a))}).data(i)),e.xScale(n.webglScale).yScale(w.webglScale).decorate(function(e){return t.decorate()(e,i,0)}),e(i.length)};return w.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],w):h},w.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],w):g},i.rebindAll(w,t,i.exclude("align")),i.rebind(w,e,"context","lineWidth"),w},B=function(){var e=function(e){return e.upperQuartile},t=function(e){return e.lowerQuartile},a=function(e){return e.high},l=function(e){return e.low},n=function(e){return e.value},c=function(e){return e.median},s="vertical",h="center",g=function(){return 5},u=f({decorate:function(){},defined:function(r,d){return o(l,a,t,e,n,c)(r,d)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return u.values=function(r,d){var i=g(r,d),o=w(h,i),b=u.xScale(),p=u.yScale();if("vertical"===s){var f=p(a(r,d));return{origin:[b(n(r,d))+o,f],high:0,upperQuartile:p(e(r,d))-f,median:p(c(r,d))-f,lowerQuartile:p(t(r,d))-f,low:p(l(r,d))-f,width:i}}var y=b(l(r,d));return{origin:[y,p(n(r,d))+o],high:b(a(r,d))-y,upperQuartile:b(e(r,d))-y,median:b(c(r,d))-y,lowerQuartile:b(t(r,d))-y,low:0,width:i}},u.xValues=function(){return"vertical"===s?[n]:[e,t,a,l,c]},u.yValues=function(){return"vertical"===s?[e,t,a,l,c]:[n]},u.orient=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],u):s},u.lowerQuartileValue=function(){return arguments.length?(t=p(0>=arguments.length?void 0:arguments[0]),u):t},u.upperQuartileValue=function(){return arguments.length?(e=p(0>=arguments.length?void 0:arguments[0]),u):e},u.lowValue=function(){return arguments.length?(l=p(0>=arguments.length?void 0:arguments[0]),u):l},u.highValue=function(){return arguments.length?(a=p(0>=arguments.length?void 0:arguments[0]),u):a},u.crossValue=function(){return arguments.length?(n=p(0>=arguments.length?void 0:arguments[0]),u):n},u.medianValue=function(){return arguments.length?(c=p(0>=arguments.length?void 0:arguments[0]),u):c},u.bandwidth=function(){return arguments.length?(g=p(0>=arguments.length?void 0:arguments[0]),u):g},u.align=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],u):h},u},I=function(){var e=[],t=function(e){return e},a=function(e,t){return t},l=f({decorate:function(){},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return l.xValues=function(){return e.map(function(e){return e.xValues()}).reduce(function(e,t){return e.concat(t)})},l.yValues=function(){return e.map(function(e){return e.yValues()}).reduce(function(e,t){return e.concat(t)})},l.mapping=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.key=function(){return arguments.length?(a=0>=arguments.length?void 0:arguments[0],l):a},l.series=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},l},P=function(){var e=I(),a=t.dataJoin("g"),r=t.dataJoin("g","multi"),n=function(t){t.selection&&(r.transition(t),a.transition(t));var i=e.mapping(),n=e.series(),d=e.xScale(),c=e.yScale();t.each(function(t,s,o){var h=r(l.select(o[s]),n);h.each(function(e,r,s){e.xScale(d).yScale(c);var o=i(t,r,n),h=a(l.select(s[r]),[o]);h.call(e)});var g=h.selection?h.selection():h;g.order(),e.decorate()(h,t,s)})};return i.rebindAll(n,e),i.rebind(n,r,"key"),n},T=function(){var e=null,t=I(),a=function(a){var l=t.mapping(),i=t.series(),r=t.xScale(),n=t.yScale();i.forEach(function(d,s){var o=l(a,s,i);d.context(e).xScale(r).yScale(n);var h;d.decorate?(h=d.decorate(),d.decorate(function(e,l,r){t.decorate()(e,a,s),h(e,l,r)})):t.decorate()(e,a,s),d(o),h&&d.decorate(h)})};return a.context=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],a):e},i.rebindAll(a,t),a},G=function(){var e=function(){return 50},t="center",a=r.scaleBand(),l=f({decorate:function(){},xScale:r.scaleLinear(),yScale:r.scaleLinear()});return l.offsetScaleForDatum=function(l,r,n){var i=e(r,n),d=w(t,i),s=i/2;return a.domain(c.range(0,l.length)).range([-s+d,s+d])},l.bandwidth=function(){return arguments.length?(e=p(0>=arguments.length?void 0:arguments[0]),l):e},l.align=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},i.rebindAll(l,a,i.includeMap({paddingInner:"paddingOuter"})),l},M=function(e){return e.sort(c.ascending).filter(function(e,t,a){return-1===a.indexOf(e,t+1)})},D=function(){var e=function(e){return e.x},t=function(e){return e.y},a=function(e){return e.color},l=function(){return 5},n=function(){return 5},h=s.interpolateViridis,g=f({decorate:function(){},defined:function(l,r){return o(e,t,a)(l,r)},xScale:r.scaleIdentity(),yScale:r.scaleIdentity()});return g.pathGenerator=d.shapeBar().x(0).y(0),g.colorScale=function(e){var t=e.map(a);return r.scaleLinear().domain([c.min(t),c.max(t)])},g.values=function(r,d){return{x:g.xScale()(e(r,d)),y:g.yScale()(t(r,d)),colorValue:a(r,d),width:n(r,d),height:l(r,d)}},g.xValues=function(){return[e]},g.yValues=function(){return[t]},g.xValue=function(){return arguments.length?(e=p(0>=arguments.length?void 0:arguments[0]),g):e},g.yValue=function(){return arguments.length?(t=p(0>=arguments.length?void 0:arguments[0]),g):t},g.colorValue=function(){return arguments.length?(a=p(0>=arguments.length?void 0:arguments[0]),g):a},g.colorInterpolate=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],g):h},g.xBandwidth=function(){return arguments.length?(n=p(0>=arguments.length?void 0:arguments[0]),g):n},g.yBandwidth=function(){return arguments.length?(l=p(0>=arguments.length?void 0:arguments[0]),g):l},i.rebindAll(g,g.pathGenerator,i.includeMap({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),g};e.autoBandwidth=function(e){var t=.75,a=function(e){if(1>=e.length)return 10;e=M(e);var a=c.pairs(e).map(function(e){var t=Math.abs;return t(e[0]-e[1])}),l=c.min(a);return t*l},r=function(t,l,i){if(t.bandwidth)return t.bandwidth();var r,n=Array.isArray(l)?(r=[]).concat.apply(r,h(l)):l,d=n.filter(e.defined()).map(i()).map(t),c=a(d);return c},n=function(t){var a=function(t){if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(r(e.xScale(),t,e.xValue)),e.yBandwidth(r(e.yScale(),t,e.yValue));else{var a=e.orient&&"horizontal"===e.orient()?e.yScale():e.xScale();e.bandwidth(r(a,t,e.crossValue))}};t instanceof l.selection?t.each(function(t,i,r){a(t),e(l.select(r[i]))}):(a(t),e(t))};return i.rebindAll(n,e),n.widthFraction=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],n):t},n},e.seriesCanvasArea=function(){var e=y(),t=a.area(),l=function(a){var l=t.context();t.defined(e.defined());var r=a.map(e.values);t.x(function(e,t){return r[t].transposedX}).y(function(e,t){return r[t].transposedY});var n="vertical"===e.orient()?"y":"x";t[n+"0"](function(e,t){return r[t].y0}),t[n+"1"](function(e,t){return r[t].y}),l.beginPath(),l.fillStyle=S.gray,l.strokeStyle="transparent",e.decorate()(l,a),t(a),l.fill(),l.stroke(),l.closePath()};return i.rebindAll(l,e,i.exclude("bandwidth","align")),i.rebind(l,t,"curve","context"),l},e.seriesCanvasBar=function(){var e=y(),t=d.shapeBar().x(0).y(0),a=function(t){return"vertical"===e.orient()?t.height:t.width},l=function(t){return"vertical"===e.orient()?t.width:t.height},r=function(i){var r=t.context(),n=i.filter(e.defined()),d=n.map(e.values);"vertical"===e.orient()?(t.verticalAlign("top"),t.horizontalAlign("center")):(t.horizontalAlign("right"),t.verticalAlign("center")),d.forEach(function(n,d){r.save(),r.beginPath(),r.translate(n.origin[0],n.origin[1]),r.fillStyle=S.darkGray,r.strokeStyle="transparent",e.decorate()(r,n.d,d),a(t)(-n.height),l(t)(n.width),t([n]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(r,e),i.rebind(r,t,"context"),r},e.seriesCanvasBoxPlot=function(){var e=B(),t=d.shapeBoxPlot().value(0),a=function(a){var l=a.filter(e.defined()),r=t.context();t.orient(e.orient()),l.forEach(function(a,l){r.save();var i=e.values(a,l);r.translate(i.origin[0],i.origin[1]),r.beginPath(),r.fillStyle=S.gray,r.strokeStyle=S.black,e.decorate()(r,a,l),t.median(i.median).upperQuartile(i.upperQuartile).lowerQuartile(i.lowerQuartile).high(i.high).width(i.width).low(i.low)([a]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(a,e),i.rebind(a,t,"cap","context"),a},e.seriesCanvasCandlestick=function(){return N(d.shapeCandlestick())},e.seriesCanvasErrorBar=function(){var e=V(),t=d.shapeErrorBar().value(0),a=function(a){var l=a.filter(e.defined()),r=t.context();t.orient(e.orient()),l.forEach(function(a,l){r.save();var i=e.values(a,l);r.translate(i.origin[0],i.origin[1]),r.beginPath(),r.strokeStyle=S.black,r.fillStyle=S.gray,e.decorate()(r,a,l),t.high(i.high).width(i.width).low(i.low)([a]),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(a,e),i.rebind(a,t,"context"),a},e.seriesCanvasGrouped=function(e){var t=G(),a=function(a){a.forEach(function(l,r){var n="horizontal"!==e.orient(),d=function(e,l){var i=t.offsetScaleForDatum(a,e,l),d=n?t.xScale():t.yScale();return d(e)+i(r)+i.bandwidth()/2};n?(e.xScale(d),e.yScale(t.yScale())):(e.yScale(d),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth(function(e,l){return t.offsetScaleForDatum(a,e,l).bandwidth()}),e.decorate(function(e,a){return t.decorate()(e,a,r)}),e(l)})};return i.rebindAll(a,e,i.exclude("decorate","xScale","yScale")),i.rebindAll(a,t,i.exclude("offsetScaleForDatum")),a},e.seriesCanvasHeatmap=function(){var e=D(),t=function(t){var a=t.filter(e.defined()),l=e.colorInterpolate(),r=e.colorScale(a),n=e.pathGenerator.context();a.forEach(function(t,a){n.save(),n.beginPath();var i=e.values(t,a);n.translate(i.x,i.y),n.fillStyle=l(r(i.colorValue)),n.strokeStyle="transparent",e.decorate()(n,t,a),e.pathGenerator.height(i.height).width(i.width)([t]),n.fill(),n.stroke(),n.closePath(),n.restore()})};return i.rebind(t,e.pathGenerator,"context"),i.rebindAll(t,e),t},e.seriesCanvasLine=v,e.seriesCanvasMulti=T,e.seriesCanvasOhlc=function(){return N(d.shapeOhlc())},e.seriesCanvasPoint=function(){var e=a.symbol(),t=y(),l=function(a){var l=a.filter(t.defined()),r=e.context();l.forEach(function(a,l){r.save();var i=t.values(a,l);r.translate(i.origin[0],i.origin[1]),r.beginPath(),r.strokeStyle=S.black,r.fillStyle=S.gray,t.decorate()(r,a,l),e(a,l),r.fill(),r.stroke(),r.closePath(),r.restore()})};return i.rebindAll(l,t,i.exclude("baseValue","bandwidth","align")),i.rebind(l,e,"size","type","context"),l},e.seriesCanvasRepeat=function(){var e="vertical",t=v(),a=T(),l=function(l){"vertical"===e?a.series(l[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(l.map(function(){return t})).mapping(function(e,t){return e[t]}),a(l)};return l.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],l):t},l.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l):e},i.rebindAll(l,a,i.exclude("series","mapping")),l},e.seriesSvgArea=function(){var e=y(),r=a.area(),n=t.dataJoin("path","area"),d=function(t){t.selection&&n.transition(t),r.defined(e.defined()),t.each(function(t,a,i){var d=t.map(e.values);r.x(function(e,t){return d[t].transposedX}).y(function(e,t){return d[t].transposedY});var c="vertical"===e.orient()?"y":"x";r[c+"0"](function(e,t){return d[t].y0}),r[c+"1"](function(e,t){return d[t].y});var s=n(l.select(i[a]),[t]);s.enter().attr("fill",S.gray),s.attr("d",r),e.decorate()(s,t,a)})};return i.rebindAll(d,e,i.exclude("bandwidth","align")),i.rebind(d,n,"key"),i.rebind(d,r,"curve"),d},e.seriesSvgBar=function(){var e=d.shapeBar().x(0).y(0),a=y(),r=t.dataJoin("g","bar"),n=function(e){return"vertical"===a.orient()?e.height:e.width},c=function(e){return"vertical"===a.orient()?e.width:e.height},s=function(e){return"translate("+e[0]+", "+e[1]+")"},o=function(t){t.selection&&r.transition(t),t.each(function(t,i,d){var o=a.orient();if("vertical"!==o&&"horizontal"!==o)throw new Error("The bar series does not support an orientation of "+o);var h=t.filter(a.defined()),u=h.map(a.values);e.width(0).height(0),"vertical"===a.orient()?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));var b=r(l.select(d[i]),h);b.enter().attr("transform",function(e,t){return s(u[t].baseOrigin)}).attr("class","bar "+a.orient()).attr("fill",S.darkGray).append("path").attr("d",function(t,a){return c(e)(u[a].width),e([t])}),b.attr("transform",function(e,t){return s(u[t].origin)}).select("path").attr("d",function(t,a){return c(e)(u[a].width),n(e)(-u[a].height),e([t])}),a.decorate()(b,h,i)})};return i.rebindAll(o,a),i.rebind(o,r,"key"),o},e.seriesSvgBoxPlot=function(){var e=B(),a=t.dataJoin("g","box-plot"),r=d.shapeBoxPlot().value(0),n=function(e){return function(t){return e.selection?t.transition(e):t}},c=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},s=function(t){t.selection&&a.transition(t);var s=n(t);t.each(function(t,i,n){var d=t.filter(e.defined()),o=a(l.select(n[i]),d);o.enter().attr("stroke",S.black).attr("fill",S.gray).attr("transform",function(t,a){return c(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),r.orient(e.orient()),o.each(function(t,a,i){var n=e.values(t,a);r.median(n.median).upperQuartile(n.upperQuartile).lowerQuartile(n.lowerQuartile).width(n.width).high(n.high).low(n.low),s(l.select(i[a])).attr("transform",c(n)).select("path").attr("d",r([t]))}),e.decorate()(o,t,i)})};return i.rebindAll(s,e),i.rebind(s,a,"key"),i.rebind(s,r,"cap"),s},e.seriesSvgCandlestick=function(){return k(d.shapeCandlestick(),"candlestick")},e.seriesSvgErrorBar=function(){var e=V(),a=t.dataJoin("g","error-bar"),r=d.shapeErrorBar().value(0),n=function(e){return function(t){return e.selection?t.transition(e):t}},c=function(e){return"translate("+e.origin[0]+", "+e.origin[1]+")"},s=function(t){t.selection&&a.transition(t);var s=n(t);t.each(function(t,i,n){var d=t.filter(e.defined()),o=d.map(e.values),h=a(l.select(n[i]),d);h.enter().attr("stroke",S.black).attr("fill",S.gray).attr("transform",function(t,a){return c(e.values(t,a))+" scale(1e-6, 1)"}).append("path"),r.orient(e.orient()),h.each(function(e,t,a){var i=o[t];r.high(i.high).low(i.low).width(i.width),s(l.select(a[t])).attr("transform",c(i)+" scale(1)").select("path").attr("d",r([e]))}),e.decorate()(h,t,i)})};return i.rebindAll(s,e),i.rebind(s,a,"key"),s},e.seriesSvgGrouped=function(e){var a=G(),r=t.dataJoin("g","grouped"),n=function(t){t.selection&&r.transition(t),t.each(function(t,i,n){var d=r(l.select(n[i]),t);d.enter().append("g"),d.select("g").each(function(i,r,n){var d=l.select(n[r]),c="horizontal"!==e.orient(),s=function(e,l){var i=a.offsetScaleForDatum(t,e,l),n=c?a.xScale():a.yScale();return n(e)+i(r)+i.bandwidth()/2};c?(e.xScale(s),e.yScale(a.yScale())):(e.yScale(s),e.xScale(a.xScale())),e.bandwidth&&e.bandwidth(function(e,l){return a.offsetScaleForDatum(t,e,l).bandwidth()}),e.decorate(function(e,t){return a.decorate()(e,t,r)}),d.call(e)})})};return i.rebindAll(n,e,i.exclude("decorate","xScale","yScale")),i.rebindAll(n,a,i.exclude("offsetScaleForDatum")),n},e.seriesSvgHeatmap=function(){var e=D(),a=t.dataJoin("g","box"),r=function(e){return"translate("+e.x+", "+e.y+")"},n=function(t){t.each(function(t,i,n){var d=t.filter(e.defined()),c=e.colorValue(),s=e.colorInterpolate(),o=e.colorScale(d),h=a(l.select(n[i]),d);h.enter().append("path").attr("stroke","transparent"),h.attr("transform",function(t,a){return r(e.values(t,a))}).select("path").attr("d",function(t,a){return e.pathGenerator.width(e.values(t,a).width).height(e.values(t,a).height)([t])}).attr("fill",function(e,t){return s(o(c(e,t)))}),e.decorate()(h,t,i)})};return i.rebindAll(n,e),n},e.seriesSvgLine=x,e.seriesSvgMulti=P,e.seriesSvgOhlc=function(){return k(d.shapeOhlc(),"ohlc")},e.seriesSvgPoint=function(){var e=a.symbol(),r=y(),n=t.dataJoin("g","point"),c=function(e){return"translate("+e[0]+", "+e[1]+")"},s=function(t){t.selection&&n.transition(t),t.each(function(t,a,i){var d=t.filter(r.defined()),s=n(l.select(i[a]),d);s.enter().attr("transform",function(e,t){return c(r.values(e,t).origin)}).attr("fill",S.gray).attr("stroke",S.black).append("path"),s.attr("transform",function(e,t){return c(r.values(e,t).origin)}).select("path").attr("d",e),r.decorate()(s,t,a)})};return i.rebindAll(s,r,i.exclude("baseValue","bandwidth","align")),i.rebind(s,n,"key"),i.rebind(s,e,"type","size"),s},e.seriesSvgRepeat=function(){var e="vertical",t=x(),a=P(),r=function(i){return i.each(function(i,r,n){"vertical"===e?a.series(i[0].map(function(){return t})).mapping(function(e,t){return e.map(function(e){return e[t]})}):a.series(i.map(function(){return t})).mapping(function(e,t){return e[t]}),l.select(n[r]).call(a)})};return r.series=function(){return arguments.length?(t=0>=arguments.length?void 0:arguments[0],r):t},r.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],r):e},i.rebindAll(r,a,i.exclude("series","mapping")),r},e.seriesWebglArea=function(){var e=y(),t=n.webglAdjacentAttribute(0,1),a=t.offset(1),l=n.webglAdjacentAttribute(0,1),r=l.offset(1),d=n.webglAdjacentAttribute(0,1),c=d.offset(1),s=n.webglAdjacentAttribute(0,1).type(n.webglTypes.UNSIGNED_BYTE),o=s.offset(1),h=n.webglSeriesArea().crossValueAttribute(t).crossNextValueAttribute(a).mainValueAttribute(l).mainNextValueAttribute(r).baseValueAttribute(d).baseNextValueAttribute(c).definedAttribute(s).definedNextAttribute(o),g=function(){return!1},u=n.webglScaleMapper,b=[],p=null,w=null,f=function(a){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var r=u(e.xScale()),n=u(e.yScale()),c=!g(b,a);c&&(b=a,s.value(function(t,a){return e.defined()(t,a)}).data(a)),(c||r.scale!==p)&&(p=r.scale,t.value(function(t,a){return r.scale(e.crossValue()(t,a))}).data(a)),(c||n.scale!==w)&&(w=n.scale,d.value(function(t,a){return n.scale(e.baseValue()(t,a))}).data(a),l.value(function(t,a){return n.scale(e.mainValue()(t,a))}).data(a)),h.xScale(r.webglScale).yScale(n.webglScale).decorate(function(t){return e.decorate()(t,a,0)}),h(a.length)};return f.equals=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],f):g},f.scaleMapper=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],f):u},i.rebindAll(f,e,i.exclude("bandwidth","align")),i.rebind(f,h,"context"),f},e.seriesWebglBar=function(){var e=y(),t=n.webglAttribute(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),d=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),c=n.webglSeriesBar().crossValueAttribute(t).mainValueAttribute(a).baseValueAttribute(l).bandwidthAttribute(r).definedAttribute(d),s=function(){return!1},o=n.webglScaleMapper,h=[],g=null,u=null,b=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var n=o(e.xScale()),b=o(e.yScale()),p=!s(h,i);p&&(h=i,r.value(function(t,a){return e.bandwidth()(t,a)}).data(i),d.value(function(t,a){return e.defined()(t,a)}).data(i)),(p||n.scale!==g)&&(g=n.scale,t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(i)),(p||b.scale!==u)&&(u=b.scale,l.value(function(t,a){return b.scale(e.baseValue()(t,a))}).data(i),a.value(function(t,a){return b.scale(e.mainValue()(t,a))}).data(i)),c.xScale(n.webglScale).yScale(b.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),c(i.length)};return b.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],b):s},b.scaleMapper=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],b):o},i.rebindAll(b,e,i.exclude("align")),i.rebind(b,c,"context"),b},e.seriesWebglBoxPlot=function(){var e=B(),t=n.webglAttribute(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute(),d=n.webglAttribute(),c=n.webglAttribute(),s=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),o=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),h=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),g=n.webglSeriesBoxPlot().crossValueAttribute(t).highValueAttribute(a).upperQuartileValueAttribute(l).medianValueAttribute(r).lowerQuartileValueAttribute(d).lowValueAttribute(c).bandwidthAttribute(s).capAttribute(o).definedAttribute(h),u=function(){return!1},b=n.webglScaleMapper,w=[],f=null,y=null,S=p(20),x=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var n=b(e.xScale()),p=b(e.yScale()),x=!u(w,i);x&&(w=i,s.value(function(t,a){return e.bandwidth()(t,a)}).data(i),o.value(function(e,t){return S(e,t)}).data(i),h.value(function(t,a){return e.defined()(t,a)}).data(i)),(x||n.scale!==f)&&(f=n.scale,t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(i)),(x||p.scale!==y)&&(y=p.scale,a.value(function(t,a){return p.scale(e.highValue()(t,a))}).data(i),l.value(function(t,a){return p.scale(e.upperQuartileValue()(t,a))}).data(i),r.value(function(t,a){return p.scale(e.medianValue()(t,a))}).data(i),d.value(function(t,a){return p.scale(e.lowerQuartileValue()(t,a))}).data(i),c.value(function(t,a){return p.scale(e.lowValue()(t,a))}).data(i)),g.xScale(n.webglScale).yScale(p.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),g(i.length)};return x.cap=function(){return arguments.length?(S=p(0>=arguments.length?void 0:arguments[0]),x):S},x.equals=function(){return arguments.length?(u=0>=arguments.length?void 0:arguments[0],x):u},x.scaleMapper=function(){return arguments.length?(b=0>=arguments.length?void 0:arguments[0],x):b},i.rebindAll(x,e,i.exclude("align")),i.rebind(x,g,"context","lineWidth"),x},e.seriesWebglCandlestick=function(){return E(n.webglSeriesCandlestick())},e.seriesWebglErrorBar=function(){var e=V(),t=n.webglAttribute(),a=n.webglAttribute(),l=n.webglAttribute(),r=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),d=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),c=n.webglSeriesErrorBar().crossValueAttribute(t).highValueAttribute(a).lowValueAttribute(l).bandwidthAttribute(r).definedAttribute(d),s=function(){return!1},o=n.webglScaleMapper,h=[],g=null,u=null,b=function(i){if("vertical"!==e.orient())throw new Error("Unsupported orientation ".concat(e.orient()));var n=o(e.xScale()),b=o(e.yScale()),p=!s(h,i);p&&(h=i,r.value(function(t,a){return e.bandwidth()(t,a)}).data(i),d.value(function(t,a){return e.defined()(t,a)}).data(i)),(p||n.scale!==g)&&(g=n.scale,t.value(function(t,a){return n.scale(e.crossValue()(t,a))}).data(i)),(p||b.scale!==u)&&(u=b.scale,a.value(function(t,a){return b.scale(e.highValue()(t,a))}).data(i),l.value(function(t,a){return b.scale(e.lowValue()(t,a))}).data(i)),c.xScale(n.webglScale).yScale(b.webglScale).decorate(function(t){return e.decorate()(t,i,0)}),c(i.length)};return b.equals=function(){return arguments.length?(s=0>=arguments.length?void 0:arguments[0],b):s},b.scaleMapper=function(){return arguments.length?(o=0>=arguments.length?void 0:arguments[0],b):o},i.rebindAll(b,e,i.exclude("align")),i.rebind(b,c,"context","lineWidth"),b},e.seriesWebglLine=A,e.seriesWebglMulti=T,e.seriesWebglOhlc=function(){return E(n.webglSeriesOhlc())},e.seriesWebglPoint=function(){var e=y(),t=p(64),l=a.symbolCircle,r=n.webglAttribute(),d=n.webglAttribute(),c=n.webglAttribute().type(n.webglTypes.UNSIGNED_SHORT),s=n.webglAttribute().type(n.webglTypes.UNSIGNED_BYTE),o=n.webglSeriesPoint().crossValueAttribute(r).mainValueAttribute(d).sizeAttribute(c).definedAttribute(s),h=function(){return!1},g=n.webglScaleMapper,u=[],b=null,w=null,f=function(a){var p=g(e.xScale()),f=g(e.yScale()),y=!h(u,a);y&&(u=a,c.value(function(e,a){return t(e,a)}).data(a),s.value(function(t,a){return e.defined()(t,a)}).data(a)),(y||p.scale!==b)&&(b=p.scale,"vertical"===e.orient()?r.value(function(t,a){return p.scale(e.crossValue()(t,a))}).data(a):r.value(function(t,a){return p.scale(e.mainValue()(t,a))}).data(a)),(y||f.scale!==w)&&(w=f.scale,"vertical"===e.orient()?d.value(function(t,a){return f.scale(e.mainValue()(t,a))}).data(a):d.value(function(t,a){return f.scale(e.crossValue()(t,a))}).data(a)),o.xScale(p.webglScale).yScale(f.webglScale).type(n.webglSymbolMapper(l)).decorate(function(t){return e.decorate()(t,a,0)}),o(a.length)};return f.size=function(){return arguments.length?(t=p(0>=arguments.length?void 0:arguments[0]),f):t},f.type=function(){return arguments.length?(l=0>=arguments.length?void 0:arguments[0],f):l},f.equals=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],f):h},f.scaleMapper=function(){return arguments.length?(g=0>=arguments.length?void 0:arguments[0],f):g},i.rebindAll(f,e,i.exclude("baseValue","bandwidth","align")),i.rebind(f,o,"context"),f},e.seriesWebglRepeat=function(){var e="vertical",t=function(){return A()},a=T(),l=[],r=function(i){if("vertical"===e){var r=l;l=i[0].map(function(e,a){return a<r.length?r[a]:t()}),a.series(l).mapping(function(e,t){return e.map(function(e){return e[t]})})}else{var n=l;l=i.map(function(e,a){return a<n.length?n[a]:t()}),a.series(l).mapping(function(e,t){return e[t]})}a(i)};return r.series=function(){for(var e=arguments.length,a=Array(e),i=0;i<e;i++)a[i]=arguments[i];return a.length?(t="function"==typeof a[0].xScale&&"function"==typeof a[0].yScale?function(){return a[0]}:a[0],l=[],r):t},r.orient=function(){return arguments.length?(e=0>=arguments.length?void 0:arguments[0],l=[],r):e},i.rebindAll(r,a,i.exclude("series","mapping")),r},Object.defineProperty(e,"__esModule",{value:!0})});
