(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("d3-scale"),require("@d3fc/d3fc-rebind"),require("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-scale","@d3fc/d3fc-rebind","d3-time"],b):(a=a||self,b(a.fc=a.fc||{},a.d3,a.fc,a.d3))})(this,function(a,b,c,d){'use strict';function e(){var a={};return a.distance=function(a,b){return b-a},a.offset=function(a,b){return a instanceof Date?new Date(a.getTime()+b):a+b},a.clampUp=function(a){return a},a.clampDown=function(a){return a},a.copy=function(){return a},a}function f(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=b.clampUp(i),k=b.clampDown(i);j===k&&c.push(j)}}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function g(a){var d=this;arguments.length||(a=b.scaleIdentity());var h=e(),i=function(b){var c=a.domain(),d=a.range(),e=h.distance(c[0],c[1]),f=h.distance(c[0],b),g=f/e*(d[1]-d[0])+d[0];return g};return i.invert=function(b){var c=a.domain(),d=a.range(),e=(b-d[0])/(d[1]-d[0]),f=h.distance(c[0],c[1]);return h.offset(c[0],e*f)},i.domain=function(){if(!arguments.length)return a.domain();var b=0>=arguments.length?void 0:arguments[0],c=h.clampUp(b[0]),d=h.clampDown(b[1]);return a.domain([c,d]),i},i.nice=function(){a.nice();var b=a.domain(),c=h.clampUp(b[0]),d=h.clampDown(b[1]);return a.domain([c,d]),i},i.ticks=function(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];var g=a.ticks.apply(d,c);return f(g,h)},i.copy=function(){return g(a.copy()).discontinuityProvider(h.copy())},i.discontinuityProvider=function(){return arguments.length?(h=0>=arguments.length?void 0:arguments[0],i):h},c.rebindAll(i,a,c.include("range","rangeRound","interpolate","clamp","tickFormat")),i}function h(a){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h(a)}var i=function(a,b,c,d){var e={sunday:0,monday:1,saturday:6},f=86400000,g=5*f,h={},i=function(b){return 0===a(b)||6===a(b)};return h.clampDown=function(c){if(c&&i(c)){var d=b.ceil(c);return a(d)===e.sunday?b.offset(d,-1):a(d)===e.monday?b.offset(d,-2):d}return c},h.clampUp=function(c){if(c&&i(c)){var d=b.floor(c);return a(d)===e.saturday?b.offset(d,2):a(d)===e.sunday?b.offset(d,1):d}return c},h.distance=function(a,b){var d=Math.round;a=h.clampUp(a),b=h.clampDown(b);var e=c.ceil(a);if(b<e)return b.getTime()-a.getTime();var i=e.getTime()-a.getTime(),j=c.ceil(b),k=j.getTime()-b.getTime(),l=d((j.getTime()-e.getTime())/(7*f));return l*g+i-k},h.offset=function(a,e){var f=Math.floor,j=i(a)?h.clampUp(a):a;if(0===e)return j;var k=0>e,l=e,m=k?d.floor(j):c.ceil(j);if(l-=m.getTime()-j.getTime(),k&&0<l||0<e&&0>l)return new Date(j.getTime()+e);j=k?m:b.offset(m,2);var n=f(l/g);return j=b.offset(j,7*n),l-=n*g,j=new Date(j.getTime()+l),j},h.copy=function(){return h},h};a.discontinuityIdentity=e,a.discontinuityRange=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=function(a,b){return a>b[0]&&a<b[1]},e=function(a,b){return a[0]>=b[0]&&a[1]<=b[1]},f={};f.distance=function(a,c){a=f.clampUp(a),c=f.clampDown(c);var d=b.filter(function(b){return e(b,[a,c])}),g=d.map(function(a){return a[1]-a[0]});return c-a-g.reduce(function(a,b){return a+b},0)};var g=function(a,b){return a instanceof Date?new Date(a.getTime()+b):a+b};return f.offset=function(a,c){if(0<c){var d=function(){for(var d,e=f.clampUp(a),h=c;0<h;)if(d=b.filter(function(a){return a[0]>e}).sort(function(c,a){return c[0]-a[0]}),d.length){var i=d[0],j=i[0]-e;j>h?(e=g(e,h),h=0):(e=i[1],h-=j)}else e=g(e,h),h=0;return{v:e}}();if("object"===h(d))return d.v}else{var e=function(){for(var d,e=f.clampDown(a),h=c;0>h;)if(d=b.filter(function(a){return a[1]<e}).sort(function(c,a){return a[0]-c[0]}),d.length){var i=d[0],j=i[1]-e;j<h?(e=g(e,h),h=0):(e=i[0],h-=j)}else e=g(e,h),h=0;return{v:e}}();if("object"===h(e))return e.v}},f.clampUp=function(a){return b.reduce(function(a,b){return d(a,b)?b[1]:a},a)},f.clampDown=function(a){return b.reduce(function(a,b){return d(a,b)?b[0]:a},a)},f.copy=function(){return f},f},a.discontinuitySkipUtcWeekends=function(){return i(function(a){return a.getUTCDay()},d.utcDay,d.utcSaturday,d.utcMonday)},a.discontinuitySkipWeekends=function(){return i(function(a){return a.getDay()},d.timeDay,d.timeSaturday,d.timeMonday)},a.scaleDiscontinuous=g,Object.defineProperty(a,"__esModule",{value:!0})});
