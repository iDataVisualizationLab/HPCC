(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("d3-array"),require("@d3fc/d3fc-rebind")):"function"==typeof define&&define.amd?define(["exports","d3-array","@d3fc/d3fc-rebind"],b):(a=a||self,b(a.fc=a.fc||{},a.d3,a.fc))})(this,function(a,b,c){'use strict';var h=Math.abs;function d(){var a=10,c=function(c){var d=Math.ceil;return 1>=a?c.map(function(a){return[a]}):b.range(0,d(c.length/a)).map(function(b){return c.slice(b*a,(b+1)*a)})};return c.bucketSize=function(b){return arguments.length?(a=b,c):a},c}function e(){function a(a){var c=a.map(function(a){return[f(a),g(a)]}),d=b.range(1,c.length-1).map(function(a){var b=c[a-1],d=c[a],e=c[a+1];return .5*h((b[0]-e[0])*(d[1]-b[1])-(b[0]-d[0])*(e[1]-b[1]))});return d}var e=d(),f=function(a){return a},g=function(a){return a},i=function(c){if(e.bucketSize()>=c.length)return c;var d=a(c),f=e(d),g=e(c.slice(1,c.length-1)),h=g.map(function(a,c){var d=f[c],e=b.max(d),g=d.indexOf(e);return a[g]});return[].concat([c[0]],h,[c[c.length-1]])};return c.rebind(i,e,"bucketSize"),i.x=function(a){return arguments.length?(f=a,i):f},i.y=function(a){return arguments.length?(g=a,i):g},i}function f(){var a=function(a){return a},e=function(a){return a},f=d(),g=function(c){if(f.bucketSize()>=c.length)return c;var d=f(c.slice(1,c.length-1)),g=c[0],i=c[c.length-1],j=[].concat([g],d,[i]),k=a(g),l=e(g),m=d.map(function(c,d){var f=b.mean(j[d+1],a),g=b.mean(j[d+1],e),i=c.map(function(b){return[a(b),e(b)]}),m=i.map(function(a){return .5*h((k-f)*(a[1]-l)-(k-a[0])*(g-l))}),n=m.indexOf(b.max(m)),o=i[n];return k=o[0],l=o[1],c[n]});return[].concat([c[0]],m,[c[c.length-1]])};return c.rebind(g,f,"bucketSize"),g.x=function(b){return arguments.length?(a=b,g):a},g.y=function(a){return arguments.length?(e=a,g):e},g}function g(){var a=d(),e=function(a){return a},f=function(c){if(a.bucketSize()>c.length)return c;var d=b.extent(c,e),f=a(c.slice(1,c.length-1)),g=f.map(function(a){var c,f,b=Math.floor,g={},h=!0,i=a.map(e),j=i.filter(function(a){return a===d[0]||a===d[1]}).map(function(a){return i.indexOf(a)})[0];return void 0===j?(i.forEach(function(a,b){void 0===g[a]&&(g[a]=0),g[a]++,g[a]>g[c]||void 0===c?(c=a,f=b,h=!0):g[a]===g[c]&&(h=!1)}),h?a[f]:a[b(a.length/2)]):a[j]});return[].concat([c[0]],g,[c[c.length-1]])};return c.rebind(f,a,"bucketSize"),f.value=function(a){return arguments.length?(e=a,f):e},f}a.bucket=d,a.largestTriangleOneBucket=e,a.largestTriangleThreeBucket=f,a.modeMedian=g,Object.defineProperty(a,"__esModule",{value:!0})});
